<html>
<head>
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    h3 {
      margin: 0;
    }
    .input-group-addon {
      background: #fff;
      border: 0;
    }
    .col-md-8 {
      padding-left: 0;
    }
    .col-md-4 {
      padding-right: 0;
    }
    video {
      background: #000;
    }
    .btn-group {
      margin-top: 15px;
    }
    #output {
      margin-top: 55px;
      border: solid 1px #ccc;
      word-break: break-all;
      padding: 25px 15px;
    }
  </style>
</head>
<body class="container">
  <h1>Event Demo</h1>
  <p>Classes: <code>Globals</code>, <code>Event</code> and <code>EventList</code></p>

  <div class="col-md-8">
    <div class="panel panel-default">
      <div class="panel-body">
        <h4>Example 1:</h4>
        <p>Subscribe an event. And when event is triggered, see the event being fired with parameters.
          See that firing this multiple times gets lots of multiple triggers based on prevent events subscribed.</p>
        <pre>
          // Event that is fired simunatelously
          Skylink.Event.on('example1', function (data1, data2, data3) {
            console.log('Triggered example1', data1, data2, data3);
          });
        </pre>
        
        <button onclick="example1()">See Example</button>
        
        
        <h4>Example 2:</h4>
        <p>Subscribe an event. But this gets fired once only.</p>
        <pre>
          // Event that is fired once
          Skylink.Event.once('example2', function (data1, data2, data3) {
            console.log('Triggered example2', data1, data2, data3);
          });
        </pre>
        
        <button onclick="example2()">See Example</button>
        
        
        <h4>Example 3:</h4>
        <p>Unsubscribe an event.</p>
        <pre>
          // Unsubscribe a listener of an event
          var notMeantToBeFired = function (data1, data2, data3) {
            console.log('Not meant to be fired example3', data1, data2, data3);
          };
      
          Skylink.Event.on('example3', notMeantToBeFired);
          
          Skylink.Event.off('example3', notMeantToBeFired);
    
          Skylink.Event.once('example3', function (data1, data2, data3) {
            console.log('Triggered example3', data1, data2, data3);
          });
        </pre>
        
        <button onclick="example3()">See Example</button>
        
        
        <h4>Example 4:</h4>
        <p>Unsubscribes all listeners tied to an event.</p>
        <pre>
          // Unsubscribes all callback to the event
          var handler1 = function (data1, data2, data3) {
            console.log('Triggered example4-1', data1, data2, data3);
          };
          var handler2 = function (data1, data2, data3) {
            console.log('Triggered example4-2', data1, data2, data3);
          };
          
      
          Skylink.Event.on('example4-1', handler1);
          Skylink.Event.once('example4-1', handler1);
          Skylink.Event.on('example4-1', handler1);
          Skylink.Event.on('example4-2', handler2);
          Skylink.Event.once('example4-2', handler2);
          
          Skylink.Event.off('example4-1');
        </pre>
        
        <button onclick="example4()">See Example</button>
        
        
        
        <h4>Example 5:</h4>
        <p>Unsubscribes all listeners.</p>
        <pre>
          // Unsubscribes all listeners
          var handler1 = function (data1, data2, data3) {
            console.log('Triggered example5-1', data1, data2, data3);
          };
          var handler2 = function (data1, data2, data3) {
            console.log('Triggered example5-2', data1, data2, data3);
          };
          
      
          Skylink.Event.on('example5-1', handler1);
          Skylink.Event.once('example5-1', handler1);
          Skylink.Event.on('example5-1', handler1);
          Skylink.Event.on('example5-2', handler2);
          Skylink.Event.once('example5-2', handler2);
          
          Skylink.Event.off();
        </pre>
        
        <button onclick="example5()">See Example</button>
        
        
      </div>
    </div>
  </div>
  
  <div class="col-md-4">
    <div class="btn-group">
      <button class="btn btn-default btn-sm" onclick="clearL()">Clear Logs</button>
    </div>
    
    <div id="output" class="panel"></div>
  </div>
  
  <script src="../source/Globals.js"></script>
  <script src="../source/Event.js"></script>
  <script src="../source/EventList.js"></script>
  
  <script>
    var inc1 = 0;
    var inc2 = 0;
    var inc3 = 0;
    var inc4 = 0;
    var inc5 = 0;


    function handler (event, data1, data2, data3) {
      document.getElementById('output').innerHTML += '<p><b>' + event +
        '</b> ' + [data1, data2, data3].toString() + '</p>';
    }
    
    function clearL() {
      output.innerHTML = '';
    }
    
    function example1() {
      Event.on('example1', handler);
      
      inc1 += 1;
  
      Event.respond('example1', 'Triggered example1', 'Fired ' + inc1 + ' times', 10, true);
    }
    
    function example2() {
      Event.once('example2', handler);
      
      inc2 += 1;
  
      Event.respond('example2', 'Triggered example2', 'Fired ' + inc2 + ' times', 5, false);
    }
    
    function example3() {
      var notMeantToBe = function () {
        handler('example2', 'Triggered example3', 'Not meant to be fired', 15, 3);
      };
      
      inc3 += 1;
  
      Event.on('example3', notMeantToBe);
      
      Event.off('example3', notMeantToBe);
      
      handler('Turned off an example3 .on()', 1, 1, 1);
  
      Event.once('example3', handler);
    
      Event.respond('example3', 'Triggered example3', 'Fired ' + inc3 + ' times', 10, 15);
    }
    
    function example4() {
      inc4 += 1;
  
      Event.on('example4-1', handler);
      Event.on('example4-1', handler);
      Event.once('example4-1', handler);
      Event.once('example4-2', handler);
      Event.on('example4-2', handler);
      
      Event.off('example4-1');
      
      handler('Turned off an example4-1 listeners', 1, 1, 1);

      Event.respond('example4-1', 'Triggered example4-1', 'Fired ' + inc4 + ' times', 10, 15);
      Event.respond('example4-2', 'Triggered example4-2', 'Fired ' + inc4 + ' times', 10, 15);
    }
    
    function example5() {
      inc5 += 1;
  
      Event.on('example5-1', handler);
      Event.on('example5-1', handler);
      Event.once('example5-1', handler);
      Event.once('example5-2', handler);
      Event.on('example5-2', handler);
      
      Event.off();
      
      handler('Turned off all listeners', 1, 1, 1);

      Event.respond('example5-1', 'Triggered example5-1', 'Fired ' + inc5 + ' times', 10, 15);
      Event.respond('example5-2', 'Triggered example5-2', 'Fired ' + inc5 + ' times', 10, 15);
    }
    
  </script>
</body>

</html>